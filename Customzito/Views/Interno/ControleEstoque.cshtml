@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/Shared/_LoggedLayout.cshtml";

    var lstColecoes = ViewBag.lstColecoes;
    var lstProdutos = ViewBag.lstProdutos;
    List<CustomBancoLib.TB_Produto> lstRoupa = ViewBag.lstProdutosColecao;

    TempData["RoupasPartial"] = lstRoupa;

    var lstProdutosColecoes = TempData["RoupasDaColecao"] as Dictionary<string, List<CustomBancoLib.TB_Produto>>;

    List<string> chaves = new List<string>(lstProdutosColecoes.Keys);
    List<CustomBancoLib.TB_Produto> Produtos = lstProdutosColecoes.Values.SelectMany(x => x).ToList();

    Console.WriteLine("===================");
    if (lstRoupa is not null)
    {
        foreach (var item in lstRoupa)
        {
            Console.WriteLine(item.IdProduto);
        }
    }
}

<div class="container">
    <div class="row">
        <div class="col-md-6" >
            <div class="body table-responsive border rounded mt-5" style="max-height: 300px; overflow-y: auto;">
                <table class="table table-hover table-stripped">
                    <thead class="table-dark">
                        <tr>
                            <th style="letter-spacing: 3px;">
                                Coleções
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var colecao in lstColecoes) {
                            <tr>
                                <td scope="row">
                                    @colecao.Descricao
                                </td>
                                <td class="d-flex justify-content-evenly">
                                    <button class="btn btn-primary btn-sm material-symbols-outlined" id="btn-ver-roupas" data-tt="tooltip" data-bs-toggle="modal" data-bs-placement="bottom"
                                    title="Editar Coleção" data-bs-target="#EditarColecaoModal" onclick="AbrirModalEditarColecao(@colecao.IdColecao);">
                                        edit
                                    </button>
                                    <button class="btn btn-danger btn-sm material-symbols-outlined" data-bs-toggle="modal" data-bs-placement="bottom" data-tt="tooltip" id="btn-remover-colecao"
                                            title="Remover Coleção" data-bs-target="#RemoverColecaoModal"onclick="AbrirModalColecaoRemover('RestaurarModalRemoverColecao', @colecao.IdColecao);">
                                        delete
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>                
            </div>
            <button class="btn btn-success btn-sm mt-4 material-symbols-outlined" data-bs-toggle="modal" data-bs-placement="bottom" data-tt="tooltip"
                    title="Adicionar Coleção" data-bs-target="#AdicionarColecaoModal" onclick="RestaurarModalColecaoAdd('RestaurarModalAddColecao');">
                add
            </button>
            
        </div>
        <div class="col-md-6">
            <div class="body table-responsive border rounded mt-5 " style="max-height: 300px;overflow-y: auto;">
                <table class="table table-hover table-stripped" >
                    <thead class="table-dark">
                        <tr>

                            <th style="letter-spacing: 3px;">
                                Produtos
                            </th>
                            <th>Qtd</th>
                            <th>Av.</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody >
                        @foreach (var produto in lstProdutos)
                        {
                            <tr>
                                <td scope="row">
                                    @produto.Descricao
                                </td>
                                <td>
                                    @produto.qtd
                                </td>
                                <td>
                                    @produto.Avaliacao
                                </td>
                                <td class="d-flex justify-content-evenly">
                                    <button class="btn btn-primary btn-sm  material-symbols-outlined" data-bs-toggle="modal" data-bs-placement="bottom" data-tt="tooltip"
                                            title="Editar Produto" data-bs-target="#EditarRoupaModal" onclick="AbrirModalEditarRoupa(@produto.IdProduto);">
                                        edit
                                    </button>

                                    <button class="btn btn-danger btn-sm material-symbols-outlined" data-bs-toggle="modal" data-bs-placement="bottom" data-tt="tooltip"
                                            title="Remover Roupa" data-bs-target="#RemoverRoupaModal" onclick="AbrirModalRoupaRemover('RestaurarModalRemoverRoupa', @produto.IdProduto);">
                                        delete
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <button class="btn btn-success btn-sm mt-4 material-symbols-outlined" data-bs-toggle="modal" data-bs-placement="bottom" data-tt="tooltip"
                    title="Adicionar Roupa" data-bs-target="#AdicionarRoupaModal" onclick="RestaurarModalRoupaAdd('RestaurarModalAddRoupa');">
                add
            </button>
            
        </div>
        <div class="col">
            <div class="card mt-5">
                <div class="header">
                    <h2>GRÁFICO DE VENDAS</h2>
                </div>
                <div class="body">
                    <div class="sparkline" data-type="line" data-spot-radius="3" data-highlight-spot-color="rgb(233, 30, 99)" data-highlight-line-color="#222" data-min-spot-color="rgb(233, 30, 99)" data-max-spot-color="rgb(0, 150, 136)" data-spot-color="rgb(0, 188, 212)" data-offset="90" data-width="100%" data-height="150px" data-line-width="2" data-line-color="rgb(0, 188, 212)" data-fill-color="rgba(0, 188, 212, 0.3)"><canvas width="348" height="150" style="display: inline-block; width: 348px; height: 150px; vertical-align: top;"></canvas></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Adicionar Coleção-->
<div class="modal fade" id="AdicionarColecaoModal" tabindex="-1" aria-labelledby="AdicionarColecaoModal" aria-hidden="true">
    <div class="modal-dialog" id="AdicionarColecaoModalBody">
        
    </div>
</div>

<!-- Modal Editar Coleção-->
<div class="modal fade" id="EditarColecaoModal" tabindex="-1" aria-labelledby="EditarColecaoModal" aria-hidden="true">
    <div class="modal-dialog" id="EditarColecaoPartial">
        
    </div>
</div>


<!-- Modal Remover Coleção-->
<div class="modal fade" id="RemoverColecaoModal" tabindex="-1" aria-labelledby="RemoverColecaoModal" aria-hidden="true">
    <div class="modal-dialog" id="RemoverColecaoModalBody">
       
    </div>
</div>

<!-- Modal Adicionar Roupa-->
<div class="modal fade" id="AdicionarRoupaModal" tabindex="-1" aria-labelledby="AdicionarRoupaModal" aria-hidden="true">
    <div class="modal-dialog" id="AdicionarRoupaModalBody">
        
    </div>
</div>

<!-- Modal Remover Roupa-->
<div class="modal fade" id="RemoverRoupaModal" tabindex="-1" aria-labelledby="RemoverRoupaModal" aria-hidden="true">
    <div class="modal-dialog" id="RemoverRoupaModalBody">
        
    </div>
</div>

<!-- Modal Editar Coleção-->
<div class="modal fade" id="EditarRoupaModal" tabindex="-1" aria-labelledby="EditarColecaoModal" aria-hidden="true">
    <div class="modal-dialog" id="EditarRoupaPartial">
    </div>
</div>

<div id="PartialRoupas">
    @await Html.PartialAsync("_VisualizerRoupasPartial", lstRoupa);
</div>

 


@section Scripts{
    <!--sparkline -->
    <script src="~/plugins/sparkline/jquery.sparkline.min.js"></script>
  

    <!-- Logado js-->
    <script src="~/js/Logado.js" defer></script>
    
}